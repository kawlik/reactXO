(this.webpackJsonpxo=this.webpackJsonpxo||[]).push([[0],{36:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"mark",(function(){return u})),r.d(a,"result",(function(){return d})),r.d(a,"value",(function(){return b})),r.d(a,"initialValues",(function(){return h})),r.d(a,"pages",(function(){return f})),r.d(a,"calcNeed",(function(){return j})),r.d(a,"calcDepth",(function(){return m}));var i=r(0),n=r.n(i),s=r(18),c=r.n(s),o=r(8),l=r(7),u={X:"X",O:"O",EMPTY:" "},d={TIE:0,WIN:10,LOSE:-10},b={P_INF:2147483647,N_INF:-2147483647},h={gameDepth:8,gameNeed:3,gameSize:3,minSize:3,maxSize:8},f={home:"",seti:"setings",game:"game"},j=function(e){return Math.floor(3*Math.log(e))},m=function(e){return Math.floor(66*Math.log(e)/(e*e))},O=r(1),p=Object(i.createContext)(null),v=function(e){var t=e.children,r=Object(i.useState)(h.gameDepth),n=Object(l.a)(r,2),s=n[0],c=n[1],o=Object(i.useState)(h.gameNeed),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(i.useState)(h.gameSize),m=Object(l.a)(j,2),v=m[0],x=m[1],y=Object(i.useState)(!0),g=Object(l.a)(y,2),z=g[0],N=g[1],_=Object(i.useState)(null),I=Object(l.a)(_,2),S=I[0],k=I[1],E=Object(i.useState)(null),w=Object(l.a)(E,2),T=w[0],A=w[1],C=Object(i.useState)(null),P=Object(l.a)(C,2),W=P[0],D=P[1],U=Object(i.useState)(f),M=Object(l.a)(U,2),H=M[0],F=M[1];Object(i.useEffect)((function(){}),[]);var G={gameDepth:s,setGameDepth:c,gameNeed:d,setGameNeed:b,gameSize:v,setGameSize:x,gameOver:z,setGameOver:N,playerAI:S,setPlayerAI:k,playerHU:T,setPlayerHU:A,player:W,setPlayer:D,pages:H,setPages:F,data:a};return Object(O.jsx)(p.Provider,{value:G,children:t})},x=r(21),y=function(){var e=Object(i.useContext)(p).pages;return Object(O.jsx)("div",{className:"topInfo",children:Object(O.jsxs)(o.b,{exact:!0,to:e.home,className:"home",children:["   ",Object(O.jsx)(x.a,{}),"          "]})})},g=r(2),z=function(){var e=Object(i.useContext)(p),t=e.playerAI,r=e.playerHU,a=e.player,n=Object(i.useContext)(p),s=n.setPlayerAI,c=n.setPlayerHU,l=n.setPlayer,u=Object(i.useContext)(p),d=u.pages,b=u.data,h=function(e){e&&(s((function(e){return b.mark.O})),c((function(e){return b.mark.X}))),e||(s((function(e){return b.mark.O})),c((function(e){return b.mark.X})))},f=function(e){e&&l((function(e){return b.mark.O})),e||l((function(e){return b.mark.X}))},j=!!(t&&r&&a);return Object(O.jsxs)("section",{className:"main-home",children:[Object(O.jsxs)("div",{className:"elem",children:[Object(O.jsx)("h2",{className:"title",children:"Wybierz znak:"}),Object(O.jsxs)("div",{className:"choice",children:[Object(O.jsx)("button",{className:"btn __chioce __type-a",onClick:function(){return h(!0)},children:"X"}),Object(O.jsx)("button",{className:"btn __chioce __type-b",onClick:function(){return h(!1)},children:"O"})]})]}),Object(O.jsxs)("div",{className:"elem",children:[Object(O.jsx)("h2",{className:"title",children:"Wybierz, kto zaczyna:"}),Object(O.jsxs)("div",{className:"choice",children:[Object(O.jsx)("button",{className:"btn __chioce __type-a",onClick:function(){return f(!0)},children:"X"}),Object(O.jsx)("button",{className:"btn __chioce __type-b",onClick:function(){return f(!1)},children:"O"})]})]}),Object(O.jsx)(o.b,{exact:!0,to:d.seti,className:"btn next ".concat(j&&"__isVisible"),children:"Dalej"})]})},N=function(e){var t=e.id,r=e.row,a=e.col;return Object(O.jsx)("div",{className:"field",id:t,"data-row":r,"data-col":a})},_=function(e){var t=e.fields,r=e.gameID,a=e.size,i=t.map((function(e,t){return e.map((function(e,r){return Object(O.jsx)(N,{id:"field_r".concat(t,"_c").concat(r),row:t,col:r},"field_r".concat(t,"_c").concat(r))}))})),n={gridTemplateColumns:"repeat( ".concat(a,", 1fr )"),gridTemplateRows:"repeat( ".concat(a,", 1fr )")};return Object(O.jsx)("div",{id:r,className:"board darkable",style:n,children:i})},I=r(13),S=r(22),k=r(20),E=function(){function e(t,r,a){var i=this;Object(I.a)(this,e),this.setUp=function(){return i.elem=document.querySelector(i.selector),!!i.elem&&(i.setEmpty(),i.fields=Object(S.a)(i.elem.querySelectorAll(".field")),!0)},this.setEmpty=function(){for(var e=0;e<i.size;e++)for(var t=0;t<i.size;t++)i.board[e][t]=u.EMPTY},this.selector=t,this.size=r,this.need=a,this.elem=null,this.style=null,this.fields=[],this.board=new Array(+r).fill(null).map((function(e){return new Array(+r).fill(null)}))}return Object(k.a)(e,[{key:"isEmpty",value:function(e){var t=Object(l.a)(e,2),r=t[0],a=t[1];return!(r<0||r>this.size-1)&&(!(a<0||a>this.size-1)&&this.board[r][a]===u.EMPTY)}},{key:"isTie",value:function(e){for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++)if(this.board[t][r]===u.EMPTY)return!1;return!0}},{key:"isWin",value:function(e){for(var t=0;t<this.size;t++)for(var r=0;r<this.size-this.need+1;r++)if(this.board[t][r]===e){for(var a=!0,i=0;i<this.need;i++)a=this.board[t][r+i]===e&&a;if(a)return!0}for(var n=0;n<this.size;n++)for(var s=0;s<this.size-this.need+1;s++)if(this.board[s][n]===e){for(var c=!0,o=0;o<this.need;o++)c=this.board[s+o][n]===e&&c;if(c)return!0}for(var l=0;l<this.size-this.need+1;l++)for(var u=0;u<this.size-this.need+1;u++)if(this.board[l][u]===e){for(var d=!0,b=0;b<this.need;b++)d=this.board[l+b][u+b]===e&&d;if(d)return!0}for(var h=this.need-1;h<this.size;h++)for(var f=0;f<this.size-this.need+1;f++)if(this.board[h][f]===e){for(var j=!0,m=0;m<this.need;m++)j=this.board[h-m][f+m]===e&&j;if(j)return!0}return!1}}]),e}(),w=function e(t,r,a,i,n,s,c){var o=this;Object(I.a)(this,e),this.setUp=function(e){o.board.setUp()&&(o.board.fields.forEach((function(e){return e.addEventListener("click",(function(e){return o.handleClick(e)}))})),o.callback=e,o.start())},this.handleClick=function(e){if(e.preventDefault(),!o.gameOver&&o.player!==o.playerAI){var t={row:-1,col:-1};if(t.row=+e.target.dataset.row,t.col=+e.target.dataset.col,o.board.isEmpty([t.row,t.col])){if(o.board.board[t.row][t.col]=o.player,o.board.fields[t.row*o.size+t.col].classList.add("__".concat(o.player)),o.testStatus())return o.gameOver=!0,o.gameTie=!o.board.isWin(),void(o.gameTie=!!o.board.isWin());o.player=o.playerAI,o.shiftAI()}}},this.start=function(){o.player===o.playerAI&&o.shiftAI()},this.shiftAI=function(){if(console.log(o.board.board),!o.gameOver&&o.player!==o.playerHU){var e=o.bestShift();if(o.board.isEmpty([e.row,e.col])){if(o.board.board[e.row][e.col]=o.player,o.board.fields[e.row*o.size+e.col].classList.add("__".concat(o.player)),o.testStatus())return o.gameOver=!0,o.gameTie=!o.board.isWin(),void(o.gameTie=!!o.board.isWin())}else console.error("AI shift not set!!! "),console.log(e);o.player=o.playerHU}},this.testStatus=function(){return!!o.board.isWin(o.player)||!!o.board.isTie(o.player)},this.bestShift=function(){for(var e=b.N_INF,t={row:-1,col:-1},r=0;r<o.size;r++)for(var a=0;a<o.size;a++)if(o.board.isEmpty([r,a])){o.board.board[r][a]=o.playerAI;var i=o.minimax(0,!1,b.N_INF,b.P_INF);console.log(" [ row: ".concat(r," | col: ").concat(a," ] :: score -> ").concat(i," ")),i>e&&(e=i,t.row=r,t.col=a),o.board.board[r][a]=u.EMPTY}return t},this.minimax=function(e,t,r,a){if(e>o.depth)return d.TIE;if(o.board.isWin(o.playerAI))return d.WIN*(2*o.depth-e);if(o.board.isWin(o.playerHU))return d.LOSE*(2*o.depth-e);if(o.board.isTie())return d.TIE;if(t){for(var i=b.N_INF,n=0;n<o.size;n++)for(var s=0;s<o.size;s++)if(o.board.isEmpty([n,s])){o.board.board[n][s]=o.playerAI;var c=o.minimax(e+1,!1,r,a);if(c>i&&(i=c),o.board.board[n][s]=u.EMPTY,a<=(r=c>r?c:r))break}return i}for(var l=b.P_INF,h=0;h<o.size;h++)for(var f=0;f<o.size;f++)if(o.board.isEmpty([h,f])){o.board.board[h][f]=o.playerHU;var j=o.minimax(e+1,!0,r,a);if(j<l&&(l=j),o.board.board[h][f]=u.EMPTY,(a=j<a?j:a)<=r)break}return l},this.selector=t,this.depth=+c,this.size=+r,this.need=+a,this.player=i,this.playerAI=n,this.playerHU=s,this.gameOver=!1,this.gameTie=!1,this.gameWin=!1,this.board=new E(t,r,a),this.callback=null},T=function(){var e=Object(i.useContext)(p),t=e.gameSize,r=e.gameNeed,a=e.gameDepth,n=Object(i.useContext)(p),s=n.playerAI,c=n.playerHU,o=n.player,l=new Array(+t).fill(new Array(+t).fill(null)),u="boardTicTacToe";return Object(i.useEffect)((function(){new w("#".concat(u),t,r,o,s,c,a).setUp()}),[t,r,a,o,s,c]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(_,{fields:l,gameID:u,size:t})})},A=function(){var e=Object(i.useContext)(p),t=e.gameSize,r=e.gameNeed,a=e.gameDepth,n=Object(i.useContext)(p),s=n.setGameSize,c=n.setGameNeed,l=n.setGameDepth,u=Object(i.useContext)(p),d=u.data,b=u.pages,h=d.initialValues.minSize,f=d.initialValues.maxSize,j=!!(t&&r&&a);return Object(O.jsxs)("section",{className:"main-seti",children:[Object(O.jsxs)("div",{className:"elem",children:[Object(O.jsx)("h2",{className:"title",children:"Wybierz rozmiar gry:"}),Object(O.jsx)("input",{type:"range",min:h,max:f,value:t,onChange:function(e){return t=e,s((function(e){return t.target.value})),c(d.calcNeed(t.target.value)),void l(d.calcDepth(t.target.value));var t}}),Object(O.jsx)("span",{children:t})]}),Object(O.jsxs)("div",{className:"elem",children:[Object(O.jsx)("h2",{className:"title",children:"Wybierz rz\u0105d gry:"}),Object(O.jsx)("input",{type:"range",min:d.calcNeed(t),max:t,value:r,onChange:function(e){return t=e,void c((function(e){return t.target.value}));var t}}),Object(O.jsx)("span",{children:r})]}),Object(O.jsxs)("div",{className:"elem",children:[Object(O.jsx)("h2",{className:"title",children:"Wybierz poziom:"}),Object(O.jsx)("input",{type:"range",min:2,max:d.calcDepth(t),value:a,onChange:function(e){return t=e,void c((function(e){return t.target.value}));var t}}),Object(O.jsx)("span",{children:a})]}),Object(O.jsx)(o.b,{exact:!0,to:b.game,className:"btn next ".concat(j&&"__isVisible"),children:"Dalej"})]})},C=function(){var e=Object(i.useContext)(p),t=(e.offer,e.pages);return Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{exact:!0,path:"/".concat(t.home),render:function(){return Object(O.jsx)(z,{})}}),Object(O.jsx)(g.a,{exact:!0,path:"/".concat(t.game),render:function(){return Object(O.jsx)(T,{})}}),Object(O.jsx)(g.a,{exact:!0,path:"/".concat(t.seti),render:function(){return Object(O.jsx)(A,{})}})]})},P=function(){return Object(O.jsx)(v,{children:Object(O.jsxs)(o.a,{children:[Object(O.jsx)(y,{}),Object(O.jsx)(C,{})]})})};r(36);c.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(P,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.b9e3d47b.chunk.js.map